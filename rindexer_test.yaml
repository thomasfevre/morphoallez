name: morpho_blue_etl
description: Indexes key Morpho contracts for analytics.
project_type: no-code
config: {}

networks:
- name: ethereum
  chain_id: 1
  rpc: ${ETH_RPC_URL}
  reth: null
storage:
  postgres:
    enabled: true
native_transfers:
  enabled: false
contracts:
- name: MorphoBlue
  details:
  - network: ethereum
    address: '0xBBBBBbbBBb9cC5e90e3b3Af64bdAF62C37EEFFCb'
    start_block: '18883124'
  abi: auto
  include_events:
    # Core user actions & value flow
    - Supply
    - Withdraw
    - Borrow
    - Repay
    - SupplyCollateral
    - WithdrawCollateral
    - Liquidate
    - FlashLoan
    # Market creation and state changes
    - CreateMarket
    - AccrueInterest
    - SetFee

- name: PublicAllocator
  details:
  - network: ethereum
    address: '0xfd32fA2ca22c76dD6E550706Ad913FC6CE91c75D'
    start_block: '19375099'
  abi: auto
  include_events:
    # Core reallocation events
    - PublicWithdrawal
    - PublicReallocateTo
    # Configuration and fee management
    - SetAdmin
    - SetFee
    - TransferFee
    - SetFlowCaps

# This is the Steakhouse Financial WETH Vault, a good example of an active vault.
- name: MetaMorpho_Steakhouse_WETH
  details:
  - network: ethereum
    address: '0xBEEf050ecd6a16c4e7bfFbB52Ebba7846C4b8cD4'
    start_block: '18841517'
  abi: auto
  include_events:
    # User actions
    - Deposit
    - Withdraw
    # Vault operations 
    - AccrueInterest
    # New events for deeper analysis
    - ReallocateSupply
    - ReallocateWithdraw
    - SetCap
    - SetFee
    - Skim

# This is the Steakhouse Financial USDC Vault.
- name: MetaMorpho_Steakhouse_USDC
  details:
  - network: ethereum
    address: '0xBEEF01735c132Ada46AA9aA4c54623cAA92A64CB'
    start_block: '18901925'
  abi: auto
  include_events:
    # User actions 
    - Deposit
    - Withdraw
    # Vault operations 
    - AccrueInterest
    # New events for deeper analysis
    - ReallocateSupply
    - ReallocateWithdraw
    - SetCap
    - SetFee
    - Skim

- name: MetaMorphoFactory
  details:
  - network: ethereum
    address: '0x1897a8997241c1cd4bd0698647e4eb7213535c24'
    start_block: '21439510'
  abi: auto
  include_events:
  - CreateMetaMorpho

  global: 
    etherscan_api_key: ${ETHERSCAN_API_KEY}